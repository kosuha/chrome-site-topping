# Site Topping MVP 기능 설명서

Site Topping MVP는 사용자의 웹사이트에 JavaScript/CSS 코드를 실시간으로 작성, 미리보기, 배포할 수 있는 최소 기능 제품(MVP) 크롬 확장프로그램입니다.

## MVP 핵심 개념

**단순한 워크플로우**: 코드 작성 → 실시간 미리보기 → 배포

## 서비스 아키텍처

### 기본 연동 방식
1. **스크립트 삽입**: 사용자가 자신의 웹사이트에 연동 스크립트 삽입
2. **익스텐션 설치 시**: `declarativeNetRequest`를 통해 연동 스크립트 URL을 기본 차단
3. **기본 상태**: 연동 스크립트가 차단되어 원래 사이트 그대로 유지 (배포 코드 미적용)

### 실시간 미리보기 방식
- **원리**: 익스텐션이 제공하는 미리보기 스크립트로 편집 중인 코드 적용
- **동작 과정**: 
  1. **미리보기 토글 OFF (기본)**: 연동 스크립트 차단 → 원래 사이트 상태
  2. **미리보기 토글 ON**: 연동 스크립트 계속 차단 + 익스텐션이 미리보기 스크립트 주입
  3. 미리보기 스크립트가 서버에서 편집 중인 임시 코드를 가져와서 사이트에 적용
  4. 편집 중인 코드가 실시간으로 서버에 전송되어 즉시 사이트에 반영

## MVP 기능

### 패널 헤더
- **미리보기 토글**: 실시간 코드 미리보기 활성화/비활성화
- **배포 버튼**: 현재 편집 중인 코드를 실제 사이트에 배포

### 코드 편집 영역
**핵심 기능:**
- **언어 전환**: JavaScript/CSS 토글을 통한 언어 전환
- **단일 코드 편집**: 하나의 JS/CSS 코드 세트 편집
- **실시간 편집**: CodeMirror 에디터를 통한 구문 강조 및 자동완성
- **자동 저장**: 코드 변경 시 자동으로 임시 저장

### 사용자 인증 (간소화)
- **OAuth 로그인**: Google 또는 Kakao 계정을 통한 간편 로그인
- **기본 프로필**: 로그인된 사용자 정보 표시

## MVP 워크플로우

### 기본 사용 흐름
1. **로그인**: OAuth를 통한 사용자 인증
2. **연동 설정**: 사용자 사이트의 연동 스크립트 URL 입력 (차단 대상 등록)
3. **코드 작성**: JS/CSS 토글하며 코드 작성
4. **실시간 미리보기**: 미리보기 토글 활성화로 편집 중인 코드 실시간 확인
5. **배포**: 만족스러운 결과 시 배포 버튼으로 서버에 코드 저장

### 3가지 사이트 상태
1. **원래 상태 (미리보기 OFF)**: 연동 스크립트 차단 → 코드 적용 전 원래 사이트
2. **미리보기 상태 (미리보기 ON)**: 익스텐션이 편집 중인 코드 실시간 적용
3. **배포 상태**: 사용자가 별도로 연동 스크립트 차단 해제 시 배포된 코드 적용

### 실시간 미리보기 시스템
1. 미리보기 토글 활성화
2. 익스텐션이 미리보기 스크립트를 페이지에 주입
3. 코드 변경 시 편집 중인 임시 코드를 서버로 자동 전송
4. 미리보기 스크립트가 서버에서 임시 코드를 받아와 적용
5. 사이트에서 즉시 변경사항 확인 (배포 전 테스트)

### 배포 시스템
1. 배포 버튼 클릭으로 현재 편집 상태를 서버에 저장
2. 서버에 배포된 코드 상태 업데이트 완료
3. **중요**: 실제 사이트 적용은 사용자가 별도로 연동 스크립트 차단을 해제해야 함

## MVP에서 제외된 기능 (향후 구현)

### 파일 시스템
- 여러 파일 관리
- 파일명 설정
- 파일 생성/삭제
- 파일별 적용 설정

### 버전 관리
- 코드 버전 히스토리
- 버전별 저장/복원
- 대표 버전 설정
- 버전 비교

### 고급 기능
- AI 채팅을 통한 코드 수정
- 파일 목록 탭
- 복잡한 배포 관리
- 되돌리기 기능

## MVP 목표

**검증하고자 하는 가설:**
1. 사용자가 자신의 사이트에 실시간으로 JS/CSS를 적용하고 싶어하는가?
2. 서버 경유 방식의 실시간 미리보기가 충분히 빠르고 유용한가?
3. 크롬 익스텐션 형태의 코드 편집 환경이 편리한가?

**성공 지표:**
- 사용자가 실제로 코드를 작성하고 배포까지 완료하는 비율
- 실시간 미리보기 기능 사용 빈도
- 평균 세션 시간 및 재방문율